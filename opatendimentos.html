<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operações de Atendimento</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            padding: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        button {
            margin-right: 5px;
        }

        form {
            margin-top: 20px;
        }

        .btn-primary, .btn-success, .btn-info, .btn-danger {
            --bs-btn-color: #fff;
            --bs-btn-bg: #7464a1;
            --bs-btn-border-color: #7464a1;
            --bs-btn-hover-color: #fff;
            --bs-btn-hover-bg: #635589;
            --bs-btn-hover-border-color: #5d5081;
            --bs-btn-focus-shadow-rgb: 137, 123, 175;
            --bs-btn-active-color: #fff;
            --bs-btn-active-bg: #5d5081;
            --bs-btn-active-border-color: #574b79;
            --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
            --bs-btn-disabled-color: #fff;
            --bs-btn-disabled-bg: #7464a1;
            --bs-btn-disabled-border-color: #7464a1;
        }

        .btn-primary:hover, .btn-success:hover, .btn-info:hover, .btn-danger:hover {
            --bs-btn-bg: #635589;
        }
    </style>
</head>

<body>
    <h2>Operações de Atendimento</h2>

    <!-- Listar Atendimentos -->
    <h4>Listar Atendimentos</h4>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Descrição</th>
                <th>Valor</th>
                <th>ID Cliente</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody id="atendimentoTableBody">
            <!-- Os dados da tabela serão preenchidos dinamicamente aqui -->
        </tbody>
    </table>

    <!-- Adicionar Atendimento -->
    <h4>Adicionar Atendimento</h4>
    <form id="addAtendimentoForm">
        <label for="descricao">Descrição:</label>
        <input type="text" id="descricao" name="descricao" required>
        <br>

        <label for="valor">Valor:</label>
        <input type="text" id="valor" name="valor" required>
        <br>

        <label for="idCliente">ID Cliente:</label>
        <input type="text" id="idCliente" name="idCliente" required>
        <br>

        <button type="button" class="btn btn-primary" onclick="addAtendimento()">Adicionar Atendimento</button>
    </form>

    <script>
        // Função para adicionar um novo atendimento
        function addAtendimento() {
            // Obter dados do formulário
            const descricao = document.getElementById('descricao').value;
            const valor = document.getElementById('valor').value;
            const idCliente = document.getElementById('idCliente').value;

            // Enviar requisição para adicionar atendimento (você precisará implementar esta parte)
            // Aqui, você pode usar fetch ou outra biblioteca para enviar dados para o servidor
            // Certifique-se de manipular a resposta do servidor adequadamente
            // Atualizar a tabela de atendimentos após a adição bem-sucedida

            // Exemplo fictício (não funcional) usando fetch:
            fetch('http://localhost:3000/adicionar-atendimento', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    descricao: descricao,
                    valor: valor,
                    idCliente: idCliente,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Adição bem-sucedida, agora você pode atualizar a tabela
                    updateAtendimentoTable();
                } else {
                    // Tratar erro aqui, se necessário
                    console.error('Erro ao adicionar atendimento:', data.message);
                }
            })
            .catch(error => {
                console.error('Erro na solicitação:', error);
            });
        }

        // Função para atualizar a tabela de atendimentos
        function updateAtendimentoTable() {
            // Limpar tabela
            const tableBody = document.getElementById('atendimentoTableBody');
            tableBody.innerHTML = '';

            // Obter dados da tabela do servidor (você precisará implementar esta parte)
            // Exemplo fictício
        };